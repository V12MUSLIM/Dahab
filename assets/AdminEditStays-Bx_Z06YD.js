import{j as e}from"./framer-CThKW3MA.js";import{r as g,u as V}from"./router-Bg19EEV2.js";import{af as $,aX as M,aY as Q,a5 as Z,a6 as J,a7 as K,a8 as X,aa as Y,O as ee,Q as se,R as P,H as B,h as G,V as A,Z as l,ag as d,an as L,B as x,aZ as F,n as re,a_ as ae,K as ie,a$ as te,b0 as le,t as k,x as w,S as ce,aA as E,v as de,w as oe,s as ne,b1 as I,b2 as D,b3 as S,aj as me,am as he,W as xe,b4 as C,b5 as ge,j as ue,b6 as pe,aB as be,aD as je,aE as fe,aF as Ne,aG as ve,aH as ye,aI as ke,aJ as we}from"./index-CN7hAPZf.js";import{T as O}from"./textarea-CUQw3agm.js";import{C as De}from"./car-CYYMwFGd.js";import{C as Se}from"./coffee-DKXA4pp1.js";import{W as Ce}from"./wifi-D75jOzO8.js";import"./react-vendor-OvXVS5lI.js";import"./radix-BI4OvP_J.js";const Te=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Pe=$("list",Te);function Ae({stay:s,open:u,onOpenChange:n}){const{updateStay:m}=M(),[p,b]=g.useState("basic"),{register:i,handleSubmit:T,reset:j,formState:{errors:o,isDirty:f}}=Q({defaultValues:{name:s?.name||"",subtitle:s?.subtitle||"",description:s?.description||"",fullDescription:s?.fullDescription||"",pricePerNight:s?.pricePerNight||0,location:s?.location||"",address:s?.locationDetails?.address||"",city:s?.locationDetails?.city||"",region:s?.locationDetails?.region||"",checkInTime:s?.checkInTime||"",checkOutTime:s?.checkOutTime||"",minStay:s?.minStay||1,maxGuests:s?.maxGuests||2,totalRooms:s?.totalRooms||0}});g.useEffect(()=>{s&&u&&j({name:s.name||"",subtitle:s.subtitle||"",description:s.description||"",fullDescription:s.fullDescription||"",pricePerNight:s.pricePerNight||0,location:s.location||"",address:s.locationDetails?.address||"",city:s.locationDetails?.city||"",region:s.locationDetails?.region||"",checkInTime:s.checkInTime||"",checkOutTime:s.checkOutTime||"",minStay:s.minStay||1,maxGuests:s.maxGuests||2,totalRooms:s.totalRooms||0})},[s,u,j]);const N=async a=>{const y={name:a.name,subtitle:a.subtitle,description:a.description,fullDescription:a.fullDescription,pricePerNight:Number(a.pricePerNight),location:a.location,locationDetails:{...s.locationDetails,address:a.address,city:a.city,region:a.region},checkInTime:a.checkInTime,checkOutTime:a.checkOutTime,minStay:Number(a.minStay),maxGuests:Number(a.maxGuests),totalRooms:Number(a.totalRooms)};console.log("Submitting update:",{id:s._id,data:y}),await m.mutateAsync({id:s._id,data:y}),n(!1)},v=a=>{a.preventDefault(),T(N)(a)};return e.jsx(Z,{open:u,onOpenChange:n,children:e.jsxs(J,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(K,{children:[e.jsx(X,{className:"text-2xl",children:"Edit Stay"}),e.jsxs(Y,{children:["Update the details for ",s?.name]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{value:p,onValueChange:b,children:[e.jsxs(se,{className:"grid w-full grid-cols-3",children:[e.jsxs(P,{value:"basic",className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Basic Info"]}),e.jsxs(P,{value:"location",className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Location"]}),e.jsxs(P,{value:"details",className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Details"]})]}),e.jsxs(A,{value:"basic",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Stay Name *"}),e.jsx(d,{id:"name",...i("name",{required:"Name is required"}),placeholder:"Swiss Inn Resort Dahab"}),o.name&&e.jsx("p",{className:"text-sm text-destructive",children:o.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"subtitle",children:"Subtitle"}),e.jsx(d,{id:"subtitle",...i("subtitle"),placeholder:"Luxury Resort"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Short Description *"}),e.jsx(O,{id:"description",...i("description",{required:"Description is required"}),placeholder:"Brief description for card view...",rows:3}),o.description&&e.jsx("p",{className:"text-sm text-destructive",children:o.description.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fullDescription",children:"Full Description"}),e.jsx(O,{id:"fullDescription",...i("fullDescription"),placeholder:"Detailed description for the stay page...",rows:5})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"pricePerNight",children:"Price per Night (USD) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(d,{id:"pricePerNight",type:"number",...i("pricePerNight",{required:"Price is required",min:{value:1,message:"Price must be at least 1"}}),className:"pl-9",placeholder:"138"})]}),o.pricePerNight&&e.jsx("p",{className:"text-sm text-destructive",children:o.pricePerNight.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"totalRooms",children:"Total Rooms"}),e.jsx(d,{id:"totalRooms",type:"number",...i("totalRooms",{min:1}),placeholder:"152"})]})]})]}),e.jsxs(A,{value:"location",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"location",children:"Location Name *"}),e.jsx(d,{id:"location",...i("location",{required:"Location is required"}),placeholder:"Lighthouse Beach"}),o.location&&e.jsx("p",{className:"text-sm text-destructive",children:o.location.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address",children:"Full Address"}),e.jsx(d,{id:"address",...i("address"),placeholder:"Lighthouse Beach, Dahab, South Sinai"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"city",children:"City"}),e.jsx(d,{id:"city",...i("city"),placeholder:"Dahab"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"region",children:"Region"}),e.jsx(d,{id:"region",...i("region"),placeholder:"South Sinai"})]})]})]}),e.jsxs(A,{value:"details",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"checkInTime",children:"Check-in Time"}),e.jsx(d,{id:"checkInTime",...i("checkInTime"),placeholder:"14:00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"checkOutTime",children:"Check-out Time"}),e.jsx(d,{id:"checkOutTime",...i("checkOutTime"),placeholder:"12:00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"minStay",children:"Minimum Stay (nights)"}),e.jsx(d,{id:"minStay",type:"number",...i("minStay",{min:1}),placeholder:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"maxGuests",children:"Maximum Guests"}),e.jsx(d,{id:"maxGuests",type:"number",...i("maxGuests",{min:1}),placeholder:"4"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(x,{onClick:v,disabled:m.isPending||!f,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}function qe(){const{data:s,isLoading:u,error:n}=re(),{deleteStay:m}=M(),p=V(),[b,i]=g.useState(null),[T,j]=g.useState(!1),[o,f]=g.useState(!1),[N,v]=g.useState(null);if(u)return e.jsx("div",{className:"min-h-screen flex justify-center items-center",children:e.jsx("div",{className:"p-4 rounded-xl bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm",children:e.jsx(F,{className:"animate-spin text-primary h-8 w-8"})})});if(n)return e.jsx(ae,{message:n.message,error:n});const a=Array.isArray(s)?s.flat():[],y={Wifi:Ce,Coffee:Se,Utensils:xe,Car:De,Waves:he,Mountain:me},q=r=>{const c=[];return r.amenities&&Object.values(r.amenities).forEach(h=>{Array.isArray(h)&&h.slice(0,2).forEach(t=>{t.toLowerCase().includes("wifi")?c.push("Wifi"):t.toLowerCase().includes("coffee")||t.toLowerCase().includes("bar")?c.push("Coffee"):t.toLowerCase().includes("restaurant")||t.toLowerCase().includes("dining")?c.push("Utensils"):t.toLowerCase().includes("parking")||t.toLowerCase().includes("car")?c.push("Car"):t.toLowerCase().includes("beach")||t.toLowerCase().includes("sea")?c.push("Waves"):t.toLowerCase().includes("mountain")&&c.push("Mountain")})}),[...new Set(c)].slice(0,5)},_={Popular:"bg-amber-500/80 text-amber-100","Top Rated":"bg-emerald-500/80 text-emerald-100","Great Value":"bg-sky-500/80 text-sky-100","Social Hub":"bg-fuchsia-500/80 text-fuchsia-100","Budget Pick":"bg-violet-500/80 text-violet-100","Unique Stay":"bg-indigo-500/80 text-indigo-100","Boutique Luxury":"bg-rose-500/80 text-rose-100"},z=r=>{i(r),j(!0)},H=r=>{v(r),f(!0)},W=r=>{r||(j(!1),setTimeout(()=>i(null),200))},U=async()=>{N&&(await m.mutateAsync(N._id),f(!1),v(null))};return e.jsxs("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"mx-auto max-w-7xl space-y-6",children:e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsxs("header",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>p("/dashboard"),className:"h-10 w-10 rounded-xl bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm border border-white/20 dark:border-gray-800/50",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 backdrop-blur-sm border border-primary/20 shadow-lg",children:e.jsx(te,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"Manage Stays"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Edit, delete, or add stays to your accommodation listings."})]})]}),e.jsxs(x,{onClick:()=>p("addstay"),className:"gap-2 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg backdrop-blur-sm h-11",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Add New Stay"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(k,{className:"bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm border-white/20 dark:border-gray-800/50 shadow-lg",children:e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Total Stays"}),e.jsx("p",{className:"text-2xl font-bold mt-2 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:a.length})]}),e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/10 backdrop-blur-sm",children:e.jsx(B,{className:"h-6 w-6 text-blue-500"})})]})})}),e.jsx(k,{className:"bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm border-white/20 dark:border-gray-800/50 shadow-lg",children:e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Active Stays"}),e.jsx("p",{className:"text-2xl font-bold mt-2 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:a.filter(r=>r.isActive!==!1).length})]}),e.jsx("div",{className:"p-3 rounded-xl bg-green-500/10 backdrop-blur-sm",children:e.jsx(ce,{className:"h-6 w-6 text-green-500"})})]})})}),e.jsx(k,{className:"bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm border-white/20 dark:border-gray-800/50 shadow-lg",children:e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Avg. Price"}),e.jsxs("p",{className:"text-2xl font-bold mt-2 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:["$",a.length>0?Math.round(a.reduce((r,c)=>r+(c.pricePerNight||0),0)/a.length):0]})]}),e.jsx("div",{className:"p-3 rounded-xl bg-amber-500/10 backdrop-blur-sm",children:e.jsx(L,{className:"h-6 w-6 text-amber-500"})})]})})})]}),e.jsx(E,{className:"opacity-50"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:a.map(r=>{const c=q(r);return e.jsxs(k,{className:"bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm border-white/20 dark:border-gray-800/50 hover:border-primary/50 transition-all duration-300 hover:shadow-xl hover:shadow-primary/10 group",children:[e.jsx(de,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(oe,{className:"text-lg line-clamp-1 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent group-hover:from-primary group-hover:to-primary/70 transition-all",children:r.name}),r.badge&&e.jsx(ne,{className:`${_[r.badge]} rounded-lg px-2 py-0.5 text-xs whitespace-nowrap shrink-0 backdrop-blur-sm`,children:r.badge})]})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-blue-500/10",children:e.jsx(G,{className:"h-4 w-4 text-blue-500 shrink-0 mt-0.5"})}),e.jsx("span",{className:"text-muted-foreground line-clamp-1",children:r.location})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 min-h-[2.5rem]",children:r.description}),e.jsxs("div",{className:"flex items-baseline gap-1 p-3 rounded-xl bg-gradient-to-r from-primary/10 to-primary/5 backdrop-blur-sm",children:[e.jsx(L,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:r.pricePerNight}),e.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/night"})]}),c.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(I,{children:c.map((h,t)=>{const R=y[h];return e.jsxs(D,{children:[e.jsx(S,{children:e.jsx("div",{className:"p-2 bg-white/50 dark:bg-gray-800/50 hover:bg-primary/10 rounded-lg flex items-center justify-center transition-colors border border-white/30 dark:border-gray-700/50 hover:border-primary/30 backdrop-blur-sm",children:R&&e.jsx(R,{className:"w-4 h-4 text-foreground"})})}),e.jsx(C,{className:"bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm border-white/20 dark:border-gray-800/50",children:e.jsx("p",{children:h})})]},t)})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Features"}),e.jsx("ul",{className:"space-y-1 text-sm",children:r.features.slice(0,3).map((h,t)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-primary"}),e.jsx("span",{className:"line-clamp-1",children:h})]},t))})]}),e.jsx(E,{className:"opacity-30"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Quick Actions"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(I,{children:[e.jsxs(D,{children:[e.jsx(S,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"icon",onClick:()=>z(r),className:"border-white/30 dark:border-gray-700/50 bg-white/30 dark:bg-gray-800/30 backdrop-blur-sm hover:border-primary/50 hover:bg-primary/10",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsx(C,{className:"bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm border-white/20 dark:border-gray-800/50",children:e.jsx("p",{children:"Edit Stay"})})]}),e.jsxs(D,{children:[e.jsx(S,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"icon",onClick:()=>p(`/dashboard/stays/${r._id}/rooms`),className:"border-white/30 dark:border-gray-700/50 bg-white/30 dark:bg-gray-800/30 backdrop-blur-sm hover:border-primary/50 hover:bg-primary/10",children:e.jsx(ue,{className:"w-4 h-4"})})}),e.jsx(C,{className:"bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm border-white/20 dark:border-gray-800/50",children:e.jsx("p",{children:"Edit Rooms"})})]}),e.jsxs(D,{children:[e.jsx(S,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"icon",className:"border-white/30 dark:border-gray-700/50 bg-white/30 dark:bg-gray-800/30 backdrop-blur-sm hover:border-destructive/50 hover:bg-destructive/10 hover:text-destructive",onClick:()=>H(r),children:e.jsx(pe,{className:"w-4 h-4"})})}),e.jsx(C,{className:"bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm border-white/20 dark:border-gray-800/50",children:e.jsx("p",{children:"Delete Stay"})})]})]})})]})]})]},r._id)})})]})}),b&&e.jsx(Ae,{stay:b,open:T,onOpenChange:W},b._id),e.jsx(be,{open:o,onOpenChange:f,children:e.jsxs(je,{className:"bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm border-white/20 dark:border-gray-800/50",children:[e.jsxs(fe,{children:[e.jsx(Ne,{children:"Are you sure?"}),e.jsxs(ve,{className:"text-muted-foreground",children:["This will permanently delete ",e.jsx("strong",{children:N?.name}),". This action cannot be undone."]})]}),e.jsxs(ye,{children:[e.jsx(ke,{className:"border-white/30 dark:border-gray-700/50 bg-white/30 dark:bg-gray-800/30 backdrop-blur-sm",children:"Cancel"}),e.jsx(we,{onClick:U,className:"bg-destructive hover:bg-destructive/90 backdrop-blur-sm",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}export{qe as default};
//# sourceMappingURL=AdminEditStays-Bx_Z06YD.js.map
