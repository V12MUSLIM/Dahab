const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cardTemplates-rvK6qbcz.js","assets/framer-fo5XlZek.js","assets/router-BHrIduv9.js","assets/react-vendor-gH-7aFTg.js","assets/card-DeBl-Hyn.js","assets/index-BihzpQvp.js","assets/radix-CCNwdCj1.js","assets/index-DpTXfu6o.css","assets/heart-ytrr67GW.js","assets/chevron-left-DHQOoa2J.js","assets/car-Dm7W5LMk.js","assets/coffee-CUDV2hw9.js","assets/wifi-DT_3qrvD.js","assets/check-CnDIx3e8.js","assets/SocialMediaSection-DV2u8yNR.js","assets/TestimonialsSection-BtEXsp1v.js","assets/FAQSection-CqYdokwM.js"])))=>i.map(i=>d[i]);
import{c as k,u as A,D as E,m as N,f as L,g as F,_ as f}from"./index-BihzpQvp.js";import{j as e}from"./framer-fo5XlZek.js";import{r}from"./router-BHrIduv9.js";import{F as P}from"./FilteringTool-ng1BT_ai.js";import"./react-vendor-gH-7aFTg.js";import"./radix-CCNwdCj1.js";const D=async()=>(await k.get("/experience")).data.experiences,T=()=>{const{data:a,isLoading:m,error:c,isError:h}=A({queryKey:["experiences"],queryFn:D,retry:2,staleTime:3e5}),p=()=>!a||a.length===0?[]:[...new Set(a.map(l=>l.category))],y=l=>a?a.filter(d=>d.category===l):[],n=l=>a?a.find(d=>String(d.IdPage).toLowerCase()===String(l).toLowerCase()):null,[b,g]=r.useState([]);return{experiences:a,getAllCategories:p,getExperiencesByCategory:y,getExperienceById:n,toggleFavorite:l=>{g(d=>d.includes(l)?d.filter(j=>j!==l):[...d,l])},isFavorite:l=>b.includes(l),isLoading:m,error:c,isError:h}},z=r.lazy(()=>f(()=>import("./cardTemplates-rvK6qbcz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(a=>({default:a.ExperienceCard}))),B=r.lazy(()=>f(()=>import("./index-BihzpQvp.js").then(a=>a.a5),__vite__mapDeps([5,1,2,3,6,7]))),I=r.lazy(()=>f(()=>import("./SocialMediaSection-DV2u8yNR.js"),__vite__mapDeps([14,1,2,3,5,6,7]))),M=r.lazy(()=>f(()=>import("./TestimonialsSection-BtEXsp1v.js"),__vite__mapDeps([15,1,2,3,5,6,7,4]))),O=r.lazy(()=>f(()=>import("./FAQSection-CqYdokwM.js"),__vite__mapDeps([16,1,2,3,5,6,7]))),R=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 dark:bg-gray-800 h-72 rounded-2xl mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 rounded w-full"})]}),w=()=>e.jsxs("div",{className:"animate-pulse space-y-4 w-full",children:[e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-800 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(a=>e.jsx(R,{},a))})]});function U(){const{experiences:a,getAllCategories:m}=T(),[c,h]=r.useState("All"),[p,y]=r.useState(""),[n,b]=r.useState("all"),g=r.useMemo(()=>a||[],[a]),S=r.useMemo(()=>g.flatMap(s=>(s.experiences||[]).map(i=>({...i,category:s.category}))),[g]),C=r.useMemo(()=>{if(typeof m=="function"){const s=m();if(Array.isArray(s)&&s.length>0)return["All",...s]}return["All",...g.map(s=>s.category)]},[g,m]),l=r.useMemo(()=>C.map(s=>({value:s,label:s})),[C]),d=s=>{if(s==null)return NaN;if(typeof s=="number")return s;const i=String(s).match(/\d+(\.\d+)?/);return i?parseFloat(i[0]):NaN},j=r.useDeferredValue(p),[o,_]=r.useState("");r.useEffect(()=>{const s=setTimeout(()=>_(j.trim().toLowerCase()),200);return()=>clearTimeout(s)},[j]);const v=r.useMemo(()=>{let s=S;return c!=="All"&&(s=s.filter(i=>i.category===c)),o&&(s=s.filter(i=>i.title?.toLowerCase().includes(o)||i.description?.toLowerCase().includes(o)||i.location?.toLowerCase().includes(o)||i.difficulty?.toLowerCase().includes(o))),n!=="all"&&(s=s.filter(i=>{const t=d(i.price);return Number.isNaN(t)?!1:n==="low"?t<50:n==="medium"?t>=50&&t<80:n==="high"?t>=80:!0})),s},[S,c,o,n]);return E&&!a?e.jsx("div",{className:"min-h-screen flex justify-center items-center",children:e.jsx(E,{loadingMessage:"Loading Experiences"})}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-black",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-800 animate-pulse"}),children:e.jsx(B,{image:"https://images.unsplash.com/photo-1682687220742-aba13b6e50ba?w=1600",title:"Unforgettable Experiences",subtitle:"Adventure Awaits in Dahab",Icon:N,badge:"Explore",stats:[{icon:N,text:"50+ Activities"},{icon:N,text:"Expert Guides"},{icon:N,text:"All Skill Levels"}]})}),e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-800 animate-pulse mx-4 my-8 rounded-lg"}),children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsx(P,{searchQuery:p,onSearchChange:y,selectedCategory:c,onCategoryChange:h,categories:l,priceFilter:n,onPriceChange:b,showPriceFilter:!0,showCategoryFilter:!0,showSearchBar:!0})})}),e.jsx("div",{className:"py-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("p",{className:"text-muted-foreground",children:["Showing"," ",e.jsx("span",{className:"font-semibold text-foreground",children:v.length})," ",v.length===1?"experience":"experiences",c!=="All"&&e.jsxs("span",{children:[" ","in"," ",e.jsx("span",{className:"font-semibold text-yellow-600",children:c})]})]})}),e.jsxs("div",{className:"space-y-16",children:[g.map(s=>{const i=(s.experiences||[]).filter(t=>{let u=!0;if(c!=="All"&&s.category!==c&&(u=!1),u&&o&&(u=t.title?.toLowerCase().includes(o)||t.description?.toLowerCase().includes(o)||t.location?.toLowerCase().includes(o)||t.difficulty?.toLowerCase().includes(o)),u&&n!=="all"){const x=d(t.price);Number.isNaN(x)?u=!1:(n==="low"&&(u=x<50),n==="medium"&&(u=x>=50&&x<80),n==="high"&&(u=x>=80))}return u});return i.length===0?null:e.jsxs("section",{children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white inline-block pb-3 border-b-4 border-yellow-500",children:s.category})}),e.jsx(r.Suspense,{fallback:e.jsx(w,{}),children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map(t=>e.jsx(z,{title:t.title,subtitle:t.subtitle,description:t.description,images:t.images,badge:t.badge,rating:t.rating,location:t.location,duration:t.duration,groupSize:t.groupSize,difficulty:t.difficulty,price:t.price,href:t.href,buttonText:"Book Now",onButtonClick:()=>console.log("Booking:",t.title)},t.id))})})]},s.category)}),v.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"flex justify-center mb-4","aria-hidden":!0,children:e.jsx(L,{className:"w-24 h-24 text-muted-foreground"})}),e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"No experiences found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filters"}),e.jsx(F,{onClick:()=>{y(""),h("All"),b("all")},children:"Clear All Filters"})]})]})]})}),e.jsx(r.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(M,{})}),e.jsx(r.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(O,{})}),e.jsx(r.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(I,{badge:"Connect",header:"Stay Connected",description:"Follow our journey and stay updated with the latest from Dahab"})})]})}export{U as default};
//# sourceMappingURL=Experiences-NSbYscQ5.js.map
