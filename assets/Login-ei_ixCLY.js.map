{"version":3,"file":"Login-ei_ixCLY.js","sources":["../../src/components/customComponents/FormInput.jsx","../../src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Eye, EyeOff } from \"lucide-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\nexport const FormInput = ({\r\n  icon: Icon,\r\n  type = \"text\",\r\n  placeholder,\r\n  error,\r\n  register,\r\n  ...props\r\n}) => {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const inputType = type === \"password\" && showPassword ? \"text\" : type;\r\n\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <div className=\"relative\">\r\n        {Icon && (\r\n          <Icon className=\"absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-500 dark:text-gray-400 z-10\" />\r\n        )}\r\n        <Input\r\n          type={inputType}\r\n          placeholder={placeholder}\r\n          {...register}\r\n          className={`w-full ${Icon ? \"pl-14\" : \"pl-4\"} ${\r\n            type === \"password\" ? \"pr-14\" : \"pr-4\"\r\n          } py-7 text-lg bg-white/70 dark:bg-white/10 border-gray-300 dark:border-white/20 text-gray-900 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus-visible:ring-yellow-600 dark:focus-visible:ring-yellow-500 focus-visible:border-yellow-600 dark:focus-visible:border-yellow-500 ${\r\n            error ? \"border-red-500 dark:border-red-500\" : \"\"\r\n          }`}\r\n          {...props}\r\n        />\r\n        {type === \"password\" && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n            className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300 z-10\"\r\n          >\r\n            {showPassword ? (\r\n              <EyeOff className=\"w-6 h-6\" />\r\n            ) : (\r\n              <Eye className=\"w-6 h-6\" />\r\n            )}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {error && (\r\n        <p className=\"text-red-500 dark:text-red-400 text-sm ml-1\">\r\n          {error.message}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { Mail, Lock } from 'lucide-react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { loginSchema } from '@/schemas/authSchema';\r\nimport { FormInput } from '@/components/customComponents/FormInput';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Spinner } from '@/components/ui/spinner';\r\nimport {\r\n  FormPrimaryButton,\r\n  FormSecondaryButton,\r\n} from '@/components/customComponents/FormButtons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast } from 'sonner';\r\nimport { useAuthStore } from '@/store/authStore';\r\n\r\nconst LoginPage = () => {\r\n  const navigate = useNavigate();\r\n  const { setError, isLoading, setLoading } = useAuthStore();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    resolver: zodResolver(loginSchema),\r\n    defaultValues: {\r\n      email: '',\r\n      password: '',\r\n      rememberMe: false,\r\n    },\r\n  });\r\n\r\n  // Email/Password Login\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(\r\n        `${import.meta.env.VITE_API_URL}/auth/login`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          credentials: 'include', // Important: sends cookies\r\n          body: JSON.stringify({\r\n            email: data.email,\r\n            password: data.password,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Login failed');\r\n      }\r\n\r\n      toast.success('Login successful!');\r\n      navigate('/');\r\n    } catch (error) {\r\n      const errorMsg = error.message || 'Login failed. Please try again.';\r\n      setError(errorMsg);\r\n      toast.error(errorMsg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Google OAuth Redirect\r\n  const handleGoogleLogin = () => {\r\n    setLoading(true);\r\n    window.location.href = `${import.meta.env.VITE_API_URL}/auth/google`;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"min-h-screen  bg-cover bg-center bg-no-repeat flex items-center justify-center p-4 relative\"\r\n      style={{\r\n        backgroundImage: `url('image3.webp')`,\r\n      }}\r\n    >\r\n      {/* Overlay for better contrast with blur */}\r\n      <div className=\"absolute inset-0 bg-yellow-50/0 dark:bg-black/80 backdrop-blur-sm\"></div>\r\n\r\n      <div className=\"w-full max-w-2xl relative z-10\">\r\n        {/* Larger Card Container */}\r\n        <div className=\"relative overflow-hidden rounded-3xl shadow-2xl\">\r\n          {/* Background with overlay */}\r\n          <div\r\n            className=\"absolute inset-0 bg-cover bg-center\"\r\n            style={{\r\n              backgroundImage: `url('image3.webp')`,\r\n            }}\r\n          >\r\n            <div className=\"absolute inset-0 bg-gradient-to-b from-white/5 to-white/50 dark:from-black/60 dark:via-black/70 dark:to-black/80 backdrop-blur-sm\"></div>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"relative z-10 p-12 md:p-16\">\r\n            {/* Header */}\r\n            <div className=\"text-center mb-10\">\r\n              <div className=\"inline-block px-6 py-2 bg-yellow-600 text-white text-base font-semibold rounded-full mb-6\">\r\n                Welcome Back\r\n              </div>\r\n              <h1 className=\"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-3\">\r\n                Login to Dahab\r\n              </h1>\r\n              <p className=\"text-gray-700 dark:text-gray-300 text-lg\">\r\n                Continue your adventure journey\r\n              </p>\r\n            </div>\r\n\r\n            {/* Form */}\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n              {/* Email Input */}\r\n              <FormInput\r\n                icon={Mail}\r\n                type=\"email\"\r\n                placeholder=\"Email address\"\r\n                error={errors.email}\r\n                register={register(\"email\")}\r\n              />\r\n\r\n              {/* Password Input */}\r\n              <FormInput\r\n                icon={Lock}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                error={errors.password}\r\n                register={register(\"password\")}\r\n              />\r\n\r\n              <div className=\"flex items-center justify-between text-base\">\r\n                <label className=\"flex items-center text-gray-700 dark:text-gray-300 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    {...register(\"rememberMe\")}\r\n                    className=\"mr-2 rounded w-4 h-4 border-gray-300 dark:border-gray-600\"\r\n                  />\r\n                  Remember me\r\n                </label>\r\n\r\n                <a\r\n                  href=\"#\"\r\n                  className=\"text-yellow-500 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 font-semibold\"\r\n                >\r\n                  Forgot password?\r\n                </a>\r\n              </div>\r\n\r\n              <FormPrimaryButton\r\n                type=\"submit\"\r\n                disabled={isSubmitting || isLoading}\r\n                className=\"text-xl\"\r\n              >\r\n                {isSubmitting || isLoading ? (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Spinner className=\"w-4 h-4\">Logging in...</Spinner>\r\n                  </div>\r\n                ) : (\r\n                  \"Login\"\r\n                )}\r\n              </FormPrimaryButton>\r\n\r\n              <div className=\"relative my-8\">\r\n                <div className=\"absolute inset-0 flex items-center\">\r\n                  <div className=\"w-full border-t border-gray-300 dark:border-gray-600\"></div>\r\n                </div>\r\n                <div className=\"relative flex justify-center text-base\">\r\n                  <span className=\"px-4 py-1 text-sm text-gray-700 dark:text-gray-300 bg-white/30 dark:bg-black/30 backdrop-blur-md border border-white/20 dark:border-gray-800/40 rounded-full shadow-sm\">\r\n                    Or continue with\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <FormSecondaryButton\r\n                type=\"button\"\r\n                onClick={handleGoogleLogin}\r\n                disabled={isLoading}\r\n              >\r\n                <svg\r\n                  className=\"w-5 h-5 mr-2\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"currentColor\"\r\n                >\r\n                  <path\r\n                    d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\r\n                    fill=\"#4285F4\"\r\n                  />\r\n                  <path\r\n                    d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\r\n                    fill=\"#34A853\"\r\n                  />\r\n                  <path\r\n                    d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\r\n                    fill=\"#FBBC05\"\r\n                  />\r\n                  <path\r\n                    d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\r\n                    fill=\"#EA4335\"\r\n                  />\r\n                </svg>\r\n                Login with Google\r\n              </FormSecondaryButton>\r\n            </form>\r\n\r\n            {/* Footer */}\r\n            <div className=\"mt-8 text-center\">\r\n              <p className=\"text-gray-700 dark:text-gray-300 text-base\">\r\n                Don't have an account?{\" \"}\r\n                <button\r\n                  onClick={() => navigate(\"/signup\")}\r\n                  className=\"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300 font-semibold cursor-pointer\"\r\n                >\r\n                  Sign up\r\n                </button>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"names":["FormInput","Icon","type","placeholder","error","register","props","showPassword","setShowPassword","useState","inputType","jsxs","jsx","Input","EyeOff","Eye","LoginPage","navigate","useNavigate","setError","isLoading","setLoading","useAuthStore","handleSubmit","errors","isSubmitting","useForm","zodResolver","loginSchema","onSubmit","data","response","errorData","toast","errorMsg","handleGoogleLogin","Mail","Lock","FormPrimaryButton","Spinner","FormSecondaryButton"],"mappings":"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"}